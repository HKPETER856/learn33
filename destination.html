<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¬¬ä¸‰æ•™å®¤ Â· ç ”å­¦æ‰‹å†Œ</title>
  <style>
    /* ===== å®Œå…¨å¤ç”¨é¦–é¡µæ ·å¼ ===== */
    *{margin:0;padding:0;box-sizing:border-box;}
    :root{
      --primary:#0f6c74;
      --primary-dark:#084c52;
      --primary-light:#1b8a94;
      --sand:#f7f6f2;
      --paper:#ffffff;
      --line:#e9e3d8;
      --text:#2a2f36;
      --muted:#616a77;
      --shadow:0 10px 24px rgba(0,0,0,.06);
      --shadow2:0 14px 32px rgba(15,108,116,.14);
      --radius:14px;
      --max:1120px;
    }
    body{
      font-family:"PingFang SC","Microsoft YaHei",system-ui,-apple-system,Segoe UI,Arial,sans-serif;
      color:var(--text);
      line-height:1.65;
      background:
        radial-gradient(circle at 18% 0%, rgba(15,108,116,0.08), transparent 38%),
        radial-gradient(circle at 82% 100%, rgba(15,108,116,0.06), transparent 48%),
        var(--sand);
    }
    a{text-decoration:none;color:inherit;}
    img{display:block; max-width:100%;}
    .container{
      max-width:var(--max);
      margin:0 auto;
      padding:0 20px;
    }
    /* ===== é¡¶éƒ¨å¯¼èˆª ===== */
    header{
      position:sticky;
      top:0;
      z-index:50;
      background:rgba(247,246,242,.86);
      backdrop-filter:blur(10px);
      border-bottom:1px solid var(--line);
    }
    .nav{
      height:72px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:180px;
    }
    .mark{
      width:40px;height:40px;border-radius:12px;
      display:grid;place-items:center;
      background:linear-gradient(135deg, var(--primary-dark), var(--primary));
      color:#fff;
      font-weight:700;
      letter-spacing:.5px;
      box-shadow:0 10px 22px rgba(15,108,116,.18);
    }
    .brand .title{
      display:flex;
      flex-direction:column;
      line-height:1.15;
    }
    .brand strong{font-size:18px;color:var(--primary-dark);}
    .brand span{font-size:12px;color:var(--muted);}
    nav{
      display:flex;
      align-items:center;
      gap:22px;
    }
    nav a{
      font-size:15px;
      color:#49515f;
      padding:8px 10px;
      border-radius:10px;
      transition:.2s ease;
    }
    nav a:hover{
      color:var(--primary-dark);
      background:rgba(255,255,255,.75);
      box-shadow:0 8px 18px rgba(0,0,0,.05);
    }
    .menu-btn{
      display:none;
      width:42px;height:42px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.75);
      cursor:pointer;
      align-items:center;
      justify-content:center;
      gap:5px;
    }
    .menu-btn span{
      display:block;
      width:18px;height:2px;
      background:var(--primary-dark);
      border-radius:2px;
    }
    .mobile-nav{
      display:none;
      border-top:1px solid var(--line);
      background:rgba(255,255,255,.72);
      backdrop-filter:blur(10px);
    }
    .mobile-nav .inner{
      padding:10px 0 14px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .mobile-nav a{
      padding:10px 12px;
      border-radius:12px;
      color:#404958;
      border:1px solid transparent;
    }
    .mobile-nav a:hover{
      border-color:rgba(15,108,116,.20);
      background:rgba(15,108,116,.06);
      color:var(--primary-dark);
    }
    /* ===== åº•éƒ¨ ===== */
    footer{
      background:linear-gradient(135deg, var(--primary-dark), var(--primary));
      color:#fff;
      padding:34px 0;
      text-align:center;
      font-size:14px;
      letter-spacing:.6px;
    }
    /* ===== è¾…åŠ©æŒ‰é’®æ ·å¼ ===== */
    .pg-btn{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(15,108,116,.22);
      background:rgba(255,255,255,.75);
      color:var(--primary-dark);
      font-weight:600;
      cursor:pointer;
      transition:.2s ease;
      display:inline-block;
    }
    .pg-btn:hover{
      transform:translateY(-1px);
      box-shadow:var(--shadow);
      background:#fff;
    }
    /* PDFå¡ç‰‡åŠç»Ÿè®¡åŒºåŸŸ */
    .pdf-card{
      background: var(--paper);
      border-radius: var(--radius);
      border: 1px solid var(--line);
      padding: 28px 24px 32px;
      box-shadow: var(--shadow);
      margin: 40px 0 20px;
    }
    .pdf-title{
      color: var(--primary-dark);
      font-size: 26px;
      margin-bottom: 20px;
      letter-spacing: 0.2px;
      border-left: 5px solid var(--primary-light);
      padding-left: 18px;
    }
    /* æ–°å¢ç»Ÿè®¡å¡ç‰‡æ ·å¼ */
    .stats-bar{
      display: flex;
      justify-content: flex-start;
      gap: 30px;
      margin-bottom: 25px;
      background: rgba(15,108,116,0.05);
      padding: 12px 20px;
      border-radius: 999px;
      border: 1px solid var(--line);
      font-size: 15px;
    }
    .stat-item{
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--primary-dark);
    }
    .stat-number{
      font-weight: 700;
      font-size: 18px;
      background: white;
      padding: 2px 10px;
      border-radius: 40px;
      border: 1px solid var(--primary-light);
      color: var(--primary);
    }
    .pdf-embed{
      width: 100%;
      height: 70vh;
      min-height: 500px;
      border-radius: 16px;
      background: #eef0f2;
      border: 1px solid var(--line);
    }
    .pdf-footer-note{
      margin-top: 20px;
      color: var(--muted);
      text-align: center;
      font-size: 14px;
    }
    .back-link{
      margin-top: 20px;
      text-align: center;
    }
    /* å“åº”å¼ */
    @media (max-width: 640px){
      .nav{height:68px;}
      nav{display:none;}
      .menu-btn{display:flex;}
      .pdf-title{font-size: 22px; padding-left: 12px;}
      .pdf-embed{height: 60vh; min-height: 400px;}
      .pdf-card{padding: 18px 16px 24px;}
      footer{padding:28px 0; font-size:13px;}
      .stats-bar{flex-direction: column; gap: 8px; border-radius: 20px; align-items: flex-start;}
    }
    .mobile-nav[hidden] { display: none; }
  

  /* ===== Filters & search ===== */
  .filters{margin:18px 0 10px}
  .filter-row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center}
  .search{min-width:220px;flex:1 1 240px;max-width:460px;border:1px solid #d7dde6;border-radius:999px;padding:10px 14px;font-size:14px;outline:none;background:#fff}
  .search:focus{border-color:#0a6b73;box-shadow:0 0 0 3px rgba(10,107,115,.12)}
  .select{border:1px solid #d7dde6;border-radius:999px;padding:10px 12px;font-size:14px;background:#fff;outline:none}
  .select:focus{border-color:#0a6b73;box-shadow:0 0 0 3px rgba(10,107,115,.12)}
  .btn-clear{border:1px solid #d7dde6;border-radius:999px;background:#fff;padding:10px 14px;font-size:14px;cursor:pointer}
  .btn-clear:hover{border-color:#0a6b73}
  .filter-hint{margin-top:10px;text-align:center;color:#5b6576;font-size:13px}
  .data-error{margin:12px auto 0;max-width:900px;background:#fff3f3;border:1px solid #ffd1d1;color:#9b1c1c;padding:10px 12px;border-radius:12px;text-align:center}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

</style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="brand">
      <div class="mark">â…¢</div>
      <div class="title">
        <strong>ç¬¬ä¸‰æ•™å®¤</strong>
      </div>
    </div>
    <nav aria-label="ä¸»å¯¼èˆª">
      <a href="index.html">é¦–é¡µ</a>
      <a href="index.html#dest">ç ”å­¦ç›®çš„åœ°</a>
      <a href="#">å…³äº</a>
    </nav>
    <button class="menu-btn" id="menuBtn" aria-label="æ‰“å¼€èœå•" aria-expanded="false" aria-controls="mobileNav">
      <span></span><span></span><span></span>
    </button>
  </div>
  <div class="mobile-nav" id="mobileNav" hidden>
    <div class="container inner">
      <a href="index.html">é¦–é¡µ</a>
      <a href="index.html#dest">ç ”å­¦ç›®çš„åœ°</a>
      <a href="#">å…³äº</a>
    </div>
  </div>
</header>

<section class="section" style="padding: 20px 0 50px;">
  <div class="container">
    <div class="pdf-card">
      <h2 class="pdf-title" id="pdfTitle">ç ”å­¦æ‰‹å†Œ</h2>

      <!-- ========= æ–°å¢ç»Ÿè®¡æ˜¾ç¤ºåŒºåŸŸ ========= -->
      <div class="stats-bar" id="statsBar">
        <div class="stat-item">
          <span>ğŸ“„ é¡µé¢è®¿é—®é‡ï¼š</span>
          <span class="stat-number" id="pageViewCount">0</span>
        </div>
        <div class="stat-item">
          <span>â¬‡ï¸ PDFä¸‹è½½é‡ï¼š</span>
          <span class="stat-number" id="downloadCount">0</span>
        </div>
      </div>

      <embed class="pdf-embed" id="pdfEmbed" src="" type="application/pdf" aria-label="PDF ç ”å­¦æ‰‹å†Œ" />

      <div class="pdf-footer-note">
        âš¡ å¦‚æœPDFæœªæ­£å¸¸æ˜¾ç¤ºï¼Œ<a href="#" id="downloadLink" target="_blank" style="color: var(--primary); text-decoration: underline;">ç‚¹å‡»æ­¤å¤„ä¸‹è½½æ‰‹å†Œ</a>
      </div>

      <div class="back-link">
        <a href="index.html#dest" class="pg-btn">â† è¿”å›ç›®çš„åœ°åˆ—è¡¨</a>
      </div>
    </div>
  </div>
</section>

<footer>
  Â© 2026 ç¬¬ä¸‰æ•™å®¤ ï½œ è”ç³»ç”µè¯ï¼šæš‚æ—  ï½œ åœ°å€ï¼šæš‚æ— 
</footer>


<script>
  // ===== Data Layer (localStorage first, fallback to window.DESTINATIONS) =====
  (function(){
    const STORAGE_KEY = 'DESTINATIONS_DATA_V1';
    const VERSION_KEY = 'DESTINATIONS_DATA_VERSION_V1';

    function sanitizeItem(item){
      const safe = {};
      safe.name = String(item?.name ?? '').trim();
      safe.provinceCity = String(item?.provinceCity ?? '').trim();
      safe.type = String(item?.type ?? '').trim();
      safe.stage = String(item?.stage ?? '').trim();
      safe.summary = String(item?.summary ?? '').trim();
      safe.img = String(item?.img ?? '').trim();
      safe.pdf = String(item?.pdf ?? '').trim();
      return safe;
    }

    function loadFromStorage(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return null;
        const arr = JSON.parse(raw);
        if(!Array.isArray(arr)) return null;
        return arr.map(sanitizeItem).filter(d => d.name);
      }catch(e){
        console.error('Failed to parse destinations from localStorage', e);
        return null;
      }
    }

    function saveToStorage(arr){
      try{
        localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
        localStorage.setItem(VERSION_KEY, String(Date.now()));
      }catch(e){
        console.error('Failed to save destinations to localStorage', e);
      }
    }

    window.DEST_DATA = {
      STORAGE_KEY,
      VERSION_KEY,
      sanitizeItem,
      load: function(){
        const stored = loadFromStorage();
        if(stored && stored.length) return stored;
        const fallback = (window.DESTINATIONS || []).map(sanitizeItem).filter(d => d.name);
        return fallback;
      },
      save: function(arr){ saveToStorage(arr); },
      clear: function(){
        localStorage.removeItem(STORAGE_KEY);
        localStorage.removeItem(VERSION_KEY);
      }
    };
  })();
</script>
<script>
  window.__destDataLoadFailed = function(e){
    console.error("Failed to load ./data/destinations.js", e);
  };
</script>
<script src="././data/destinations.js" onerror="window.__destDataLoadFailed && window.__destDataLoadFailed(event)"></script>
<script>
  (function() {
    // ---------- 1. æ‰‹æœºèœå•äº¤äº’ ----------
    const btn = document.getElementById('menuBtn');
    const mobileNav = document.getElementById('mobileNav');
    if (btn && mobileNav) {
      btn.addEventListener('click', () => {
        const isOpen = !mobileNav.hasAttribute('hidden');
        if (isOpen) {
          mobileNav.setAttribute('hidden', '');
          btn.setAttribute('aria-expanded', 'false');
        } else {
          mobileNav.removeAttribute('hidden');
          btn.setAttribute('aria-expanded', 'true');
        }
      });
      mobileNav.addEventListener('click', (e) => {
        if (e.target.tagName.toLowerCase() === 'a') {
          mobileNav.setAttribute('hidden', '');
          btn.setAttribute('aria-expanded', 'false');
        }
      });
    }
    // ---------- 2. ç»Ÿä¸€æ•°æ®æºï¼ˆæ¥è‡ª ./data/destinations.jsï¼‰ ----------
    const destinations = (window.DEST_DATA ? window.DEST_DATA.load() : (window.DESTINATIONS || []));
    const detailError = document.getElementById('detailError');
    function showDetailError(msg){
      console.error(msg);
      if (detailError){ detailError.hidden = false; detailError.textContent = msg; }
    }
    if (!destinations || destinations.length === 0){
      showDetailError('æ²¡æœ‰è¯»å–åˆ°ç›®çš„åœ°æ•°æ®ï¼šè¯·ç¡®è®¤ ./data/destinations.js ä¸­ window.DESTINATIONS æœ‰å†…å®¹ã€‚');
    }


// ---------- 3. è·å–å½“å‰ç›®çš„åœ°ID ----------
    const urlParams = new URLSearchParams(window.location.search);
    const idParam = urlParams.get('id');
    let currentId = null;
    if (idParam !== null) {
      const id = parseInt(idParam, 10);
      if (!isNaN(id) && id >= 0 && id < destinations.length) {
        currentId = id;
      }
    }

    // ---------- 4. æ›´æ–°æ ‡é¢˜å’ŒPDFæº ----------
    const titleEl = document.getElementById('pdfTitle');
    const pdfEmbed = document.getElementById('pdfEmbed');
    const downloadLink = document.getElementById('downloadLink');
    if (titleEl && pdfEmbed && downloadLink) {
      let displayName = 'ç ”å­¦æ‰‹å†Œ';
      let pdfSrc = '';
      if (currentId !== null) {
        displayName = (destinations[currentId]?.name || 'ç›®çš„åœ°') + ' Â· ç ”å­¦æ‰‹å†Œ';
        pdfSrc = destinations[currentId]?.pdf || 'pdf/not-found.pdf';
      } else {
        displayName = 'ç›®çš„åœ° Â· ç ”å­¦æ‰‹å†Œ';
        pdfSrc = 'pdf/not-found.pdf';   // å¯è‡ªå®šä¹‰ä¸€ä¸ªæç¤ºPDF
        showDetailError('æœªæ‰¾åˆ°å¯¹åº”ç›®çš„åœ°ï¼šè¯·ä»é¦–é¡µç‚¹å‡»è¿›å…¥ï¼Œæˆ–æ£€æŸ¥é“¾æ¥å‚æ•° id æ˜¯å¦æœ‰æ•ˆã€‚');
      }
      titleEl.textContent = displayName;
      pdfEmbed.src = pdfSrc;
      downloadLink.href = pdfSrc;
    }

    // ========= 5. è®¿é—®é‡å’Œä¸‹è½½é‡ç»Ÿè®¡ï¼ˆåŸºäº localStorageï¼‰ =========
    const pageViewSpan = document.getElementById('pageViewCount');
    const downloadSpan = document.getElementById('downloadCount');

    // ä»…å½“å­˜åœ¨æœ‰æ•ˆIDæ—¶æ‰è¿›è¡Œç»Ÿè®¡ï¼ˆé¿å…æ±¡æŸ“æ— æ•ˆé¡µé¢ï¼‰
    if (currentId !== null && pageViewSpan && downloadSpan) {
      const STORAGE_KEY_VIEW = `pageView_${currentId}`;
      const STORAGE_KEY_DOWNLOAD = `downloadCount_${currentId}`;

      // è¯»å–æˆ–åˆå§‹åŒ–è®¿é—®é‡
      let pageViews = parseInt(localStorage.getItem(STORAGE_KEY_VIEW)) || 0;
      pageViews += 1;  // æ¯æ¬¡åŠ è½½é¡µé¢å¢åŠ ä¸€æ¬¡è®¿é—®é‡
      localStorage.setItem(STORAGE_KEY_VIEW, pageViews);
      pageViewSpan.textContent = pageViews;

      // è¯»å–ä¸‹è½½é‡ï¼ˆåˆå§‹ä¸º0ï¼‰
      let downloads = parseInt(localStorage.getItem(STORAGE_KEY_DOWNLOAD)) || 0;
      downloadSpan.textContent = downloads;

      // ç›‘å¬ä¸‹è½½é“¾æ¥ç‚¹å‡»ï¼Œå¢åŠ ä¸‹è½½é‡
      downloadLink.addEventListener('click', function(e) {
        // å¢åŠ ä¸‹è½½è®¡æ•°
        downloads = parseInt(localStorage.getItem(STORAGE_KEY_DOWNLOAD)) || 0;
        downloads += 1;
        localStorage.setItem(STORAGE_KEY_DOWNLOAD, downloads);
        downloadSpan.textContent = downloads;
        // æ³¨æ„ï¼šä¸é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œé“¾æ¥ä»ä¼šæ­£å¸¸ä¸‹è½½
      });
    } else {
      // æ— æœ‰æ•ˆIDæ—¶ï¼Œå¯æ˜¾ç¤ºå ä½æ•°æ®æˆ–éšè—ç»Ÿè®¡æ 
      const statsBar = document.getElementById('statsBar');
      if (statsBar) statsBar.style.display = 'none';
    }
  })();
</script>

</body>
</html>